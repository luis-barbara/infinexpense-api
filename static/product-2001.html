<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Milk Semi-Skimmed - InfinExpense</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">InfinExpense</a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Dashboard</a></li>
                <li><a href="receipts.html" class="nav-link">Receipts</a></li>
                <li><a href="products.html" class="nav-link active">Products</a></li>
                <li><a href="categories.html" class="nav-link">Categories</a></li>
                <li><a href="merchants.html" class="nav-link">Merchants</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">Milk Semi-Skimmed</h1>
            <div class="flex flex-gap">
                <a href="product-edit-2001.html" class="btn btn-primary">Edit Product</a>
                <button class="btn btn-danger">Delete Product</button>
            </div>
        </div>

        <!-- Two Column Layout -->
        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 1.5rem; height: calc(100vh - 250px);">
            
            <!-- LEFT COLUMN: Product Info -->
            <div class="card" style="display: flex; flex-direction: column; justify-content: space-between; padding: 2rem 1.5rem;">
                <!-- Product Photo -->
                <div style="max-width: 350px; margin: 0 auto 1.5rem;">
                    <img id="product-image" 
                         src="" 
                         alt="Milk Semi-Skimmed" 
                         class="image-preview"
                         style="width: 100%; aspect-ratio: 3 / 4; object-fit: contain; border-radius: 0.5rem; display: none; cursor: pointer;">
                    <div id="upload-area" class="file-upload" style="width: 300px; aspect-ratio: 3 / 4; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                        <input type="file" id="photo-upload" class="file-upload-input" accept="image/*">
                        <label for="photo-upload" class="file-upload-label" style="cursor: pointer;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ðŸ“·</div>
                            <div style="font-size: 0.875rem;">Upload Photo</div>
                        </label>
                    </div>
                </div>

                <!-- Product Info -->
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <div style="display: flex; flex-direction: column; gap: 0.25rem; align-items: center;">
                        <span style="font-size: 0.875rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em;">Category</span>
                        <span style="font-size: 0.9375rem; font-weight: 600; color: var(--text-primary);">Dairy</span>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 0.25rem; align-items: center;">
                        <span style="font-size: 0.875rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em;">Volume</span>
                        <span style="font-size: 0.9375rem; font-weight: 600; color: var(--text-primary);">Liter(s)</span>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 0.25rem; align-items: center;">
                        <span style="font-size: 0.875rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em;">Barcode</span>
                        <span style="font-size: 0.9375rem; font-weight: 600; color: var(--text-primary);">5600308532147</span>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem; padding-top: 0.5rem; border-top: 1px solid var(--border-color); align-items: center;">
                        <span style="font-size: 0.875rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em;">Current Price</span>
                        <span style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color);">0.89 â‚¬ / L</span>
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN: Price History & Changes -->
            <div style="display: flex; flex-direction: column; overflow: hidden; height: 100%;">
                <!-- Price History Chart -->
                <div class="chart-container" style="margin-bottom: 1.5rem;">
                    <h3 class="detail-title">Price History</h3>
                    <canvas id="priceHistoryChart" style="max-height: 250px;"></canvas>
                </div>

                <!-- Price Changes List -->
                <div class="card" style="flex: 1; display: flex; flex-direction: column; min-height: 0;">
                    <h3 class="detail-title">Price Changes</h3>
                    
                    <!-- Table Headers -->
                    <div class="list-header" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
                        <div class="list-header-item">
                            <span>Date</span>
                        </div>
                        <div class="list-header-item">
                            <span>Old Price</span>
                        </div>
                        <div class="list-header-item">
                            <span>New Price</span>
                        </div>
                        <div class="list-header-item">
                            <span>Diferencial</span>
                        </div>
                    </div>
                    
                    <div class="scrollable-list" style="flex: 1; overflow-y: auto;">
                        <div class="list-container">
                            <div class="list-item">
                                <div class="list-item-main" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
                                    <div class="list-item-value">Nov 10, 2025</div>
                                    <div class="list-item-value">0.85 â‚¬</div>
                                    <div class="list-item-value">0.89 â‚¬</div>
                                    <div class="list-item-value"><span class="badge badge-warning">+4.7%</span></div>
                                </div>
                            </div>

                            <div class="list-item">
                                <div class="list-item-main" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
                                    <div class="list-item-value">Oct 28, 2025</div>
                                    <div class="list-item-value">0.89 â‚¬</div>
                                    <div class="list-item-value">0.85 â‚¬</div>
                                    <div class="list-item-value"><span class="badge badge-success">-4.5%</span></div>
                                </div>
                            </div>

                            <div class="list-item">
                                <div class="list-item-main" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
                                    <div class="list-item-value">Oct 15, 2025</div>
                                    <div class="list-item-value">0.92 â‚¬</div>
                                    <div class="list-item-value">0.89 â‚¬</div>
                                    <div class="list-item-value"><span class="badge badge-success">-3.3%</span></div>
                                </div>
                            </div>

                            <div class="list-item">
                                <div class="list-item-main" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
                                    <div class="list-item-value">Oct 1, 2025</div>
                                    <div class="list-item-value">0.89 â‚¬</div>
                                    <div class="list-item-value">0.92 â‚¬</div>
                                    <div class="list-item-value"><span class="badge badge-warning">+3.4%</span></div>
                                </div>
                            </div>

                            <div class="list-item">
                                <div class="list-item-main" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
                                    <div class="list-item-value">Sep 20, 2025</div>
                                    <div class="list-item-value">0.85 â‚¬</div>
                                    <div class="list-item-value">0.89 â‚¬</div>
                                    <div class="list-item-value"><span class="badge badge-warning">+4.7%</span></div>
                                </div>
                            </div>

                            <div class="list-item">
                                <div class="list-item-main" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
                                    <div class="list-item-value">Sep 5, 2025</div>
                                    <div class="list-item-value">0.89 â‚¬</div>
                                    <div class="list-item-value">0.85 â‚¬</div>
                                    <div class="list-item-value"><span class="badge badge-success">-4.5%</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Create line chart for price history
        const ctx = document.getElementById('priceHistoryChart').getContext('2d');
        const priceHistoryChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Sep 5', 'Sep 20', 'Oct 1', 'Oct 15', 'Oct 28', 'Nov 10'],
                datasets: [{
                    label: 'Price (â‚¬)',
                    data: [0.85, 0.89, 0.92, 0.89, 0.85, 0.89],
                    borderColor: '#2563eb',
                    backgroundColor: 'rgba(37, 99, 235, 0.1)',
                    tension: 0,
                    fill: true,
                    pointRadius: 5,
                    pointHoverRadius: 7,
                    pointBackgroundColor: '#2563eb',
                    pointBorderColor: '#ffffff',
                    pointBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return 'Price: ' + context.parsed.y.toFixed(2) + ' â‚¬';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        ticks: {
                            callback: function(value) {
                                return value.toFixed(2) + ' â‚¬';
                            }
                        }
                    }
                }
            }
        });

        // Handle photo upload
        const photoUpload = document.getElementById('photo-upload');
        const productImage = document.getElementById('product-image');
        const uploadArea = document.getElementById('upload-area');

        photoUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    productImage.src = event.target.result;
                    productImage.style.display = 'block';
                    uploadArea.style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
        });

        // Toggle between image and upload area (click on image to change photo)
        productImage.addEventListener('click', function() {
            photoUpload.click();
        });
    </script>
</body>
</html>
